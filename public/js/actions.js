// Definici√≥n de acciones de testing

const TestActions = {
  // Navegaci√≥n
  openUrl: {
    type: 'openUrl',
    category: 'navigation',
    name: 'Abrir URL',
    icon: 'üåê',
    description: 'Navegar a una URL espec√≠fica',
    params: {
      url: {
        type: 'text',
        label: 'URL',
        required: true,
        placeholder: 'https://ejemplo.com',
      },
    },
  },
  goBack: {
    type: 'goBack',
    category: 'navigation',
    name: 'Retroceder',
    icon: '‚óÄÔ∏è',
    description: 'Ir a la p√°gina anterior del historial',
    params: {},
  },
  goForward: {
    type: 'goForward',
    category: 'navigation',
    name: 'Avanzar',
    icon: '‚ñ∂Ô∏è',
    description: 'Ir a la p√°gina siguiente del historial',
    params: {},
  },
  reload: {
    type: 'reload',
    category: 'navigation',
    name: 'Recargar',
    icon: 'üîÑ',
    description: 'Recargar la p√°gina actual',
    params: {},
  },
  switchTab: {
    type: 'switchTab',
    category: 'navigation',
    name: 'Cambiar Pesta√±a',
    icon: 'üóÇÔ∏è',
    description: 'Cambiar a otra pesta√±a del navegador',
    params: {
      tabIndex: {
        type: 'number',
        label: '√çndice de pesta√±a',
        required: true,
        placeholder: '0',
      },
    },
  },

  // Interacci√≥n
  click: {
    type: 'click',
    category: 'interaction',
    name: 'Click',
    icon: 'üëÜ',
    description: 'Hacer click en un elemento',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '#btnSubmit',
      },
    },
  },
  doubleClick: {
    type: 'doubleClick',
    category: 'interaction',
    name: 'Doble Click',
    icon: 'üëÜüëÜ',
    description: 'Hacer doble click en un elemento',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '#element',
      },
    },
  },
  rightClick: {
    type: 'rightClick',
    category: 'interaction',
    name: 'Click Derecho',
    icon: 'üñ±Ô∏è',
    description: 'Hacer click derecho en un elemento',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '#element',
      },
    },
  },
  type: {
    type: 'type',
    category: 'interaction',
    name: 'Escribir Texto',
    icon: '‚å®Ô∏è',
    description: 'Escribir texto en un campo',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '#input',
      },
      text: {
        type: 'text',
        label: 'Texto',
        required: true,
        placeholder: 'Texto a escribir',
      },
    },
  },
  fill: {
    type: 'fill',
    category: 'interaction',
    name: 'Rellenar Campo',
    icon: '‚úèÔ∏è',
    description: 'Rellenar un campo de formulario',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'input[name="email"]',
      },
      value: {
        type: 'text',
        label: 'Valor',
        required: true,
        placeholder: 'test@example.com',
      },
    },
  },
  select: {
    type: 'select',
    category: 'interaction',
    name: 'Seleccionar Opci√≥n',
    icon: 'üìã',
    description: 'Seleccionar opci√≥n de un dropdown',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'select#country',
      },
      option: {
        type: 'text',
        label: 'Opci√≥n',
        required: true,
        placeholder: 'Espa√±a',
      },
    },
  },
  check: {
    type: 'check',
    category: 'interaction',
    name: 'Marcar Checkbox',
    icon: '‚òëÔ∏è',
    description: 'Marcar un checkbox',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'input[type="checkbox"]',
      },
    },
  },
  uncheck: {
    type: 'uncheck',
    category: 'interaction',
    name: 'Desmarcar Checkbox',
    icon: '‚òê',
    description: 'Desmarcar un checkbox',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'input[type="checkbox"]',
      },
    },
  },
  hover: {
    type: 'hover',
    category: 'interaction',
    name: 'Hover',
    icon: 'üëã',
    description: 'Hacer hover sobre un elemento',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '.menu-item',
      },
    },
  },
  dragDrop: {
    type: 'dragDrop',
    category: 'interaction',
    name: 'Drag & Drop',
    icon: 'üéØ',
    description: 'Arrastrar y soltar un elemento',
    params: {
      source: {
        type: 'text',
        label: 'Elemento Origen',
        required: true,
        placeholder: '#draggable',
      },
      target: {
        type: 'text',
        label: 'Elemento Destino',
        required: true,
        placeholder: '#droppable',
      },
    },
  },
  press: {
    type: 'press',
    category: 'interaction',
    name: 'Presionar Tecla',
    icon: '‚èé',
    description: 'Presionar una tecla',
    params: {
      key: {
        type: 'text',
        label: 'Tecla',
        required: true,
        placeholder: 'Enter',
      },
    },
  },

  // Validaci√≥n
  getText: {
    type: 'getText',
    category: 'validation',
    name: 'Obtener Texto',
    icon: 'üìù',
    description: 'Obtener el texto de un elemento',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '.message',
      },
      variable: {
        type: 'text',
        label: 'Variable',
        required: false,
        placeholder: 'textoObtenido',
      },
    },
  },
  getAttribute: {
    type: 'getAttribute',
    category: 'validation',
    name: 'Leer Atributo',
    icon: 'üè∑Ô∏è',
    description: 'Obtener un atributo de un elemento',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'a.link',
      },
      attribute: {
        type: 'text',
        label: 'Atributo',
        required: true,
        placeholder: 'href',
      },
      variable: {
        type: 'text',
        label: 'Variable',
        required: false,
        placeholder: 'urlObtenida',
      },
    },
  },
  getValue: {
    type: 'getValue',
    category: 'validation',
    name: 'Obtener Valor',
    icon: 'üíæ',
    description: 'Obtener el valor de un input',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'input#email',
      },
      variable: {
        type: 'text',
        label: 'Variable',
        required: false,
        placeholder: 'emailValue',
      },
    },
  },
  isVisible: {
    type: 'isVisible',
    category: 'validation',
    name: 'Verificar Visible',
    icon: 'üëÅÔ∏è',
    description: 'Verificar si un elemento es visible',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '.success-message',
      },
    },
  },
  isEnabled: {
    type: 'isEnabled',
    category: 'validation',
    name: 'Verificar Habilitado',
    icon: '‚úÖ',
    description: 'Verificar si un elemento est√° habilitado',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'button#submit',
      },
    },
  },
  exists: {
    type: 'exists',
    category: 'validation',
    name: 'Verificar Existe',
    icon: 'üîç',
    description: 'Verificar si un elemento existe en el DOM',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '#elementId',
      },
    },
  },
  validateUrl: {
    type: 'validateUrl',
    category: 'validation',
    name: 'Validar URL',
    icon: 'üîó',
    description: 'Validar que la URL contiene un texto',
    params: {
      expected: {
        type: 'text',
        label: 'URL Esperada',
        required: true,
        placeholder: '/dashboard',
      },
    },
  },
  validateTitle: {
    type: 'validateTitle',
    category: 'validation',
    name: 'Validar T√≠tulo',
    icon: 'üìÑ',
    description: 'Validar el t√≠tulo de la p√°gina',
    params: {
      expected: {
        type: 'text',
        label: 'T√≠tulo Esperado',
        required: true,
        placeholder: 'Dashboard',
      },
    },
  },
  assertText: {
    type: 'assertText',
    category: 'validation',
    name: 'Verificar Texto',
    icon: '‚úîÔ∏è',
    description: 'Verificar que un elemento contiene texto espec√≠fico',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '.message',
      },
      expected: {
        type: 'text',
        label: 'Texto Esperado',
        required: true,
        placeholder: '√âxito',
      },
    },
  },
  assertValue: {
    type: 'assertValue',
    category: 'validation',
    name: 'Verificar Valor',
    icon: 'üéØ',
    description: 'Verificar el valor de un input',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'input',
      },
      expected: {
        type: 'text',
        label: 'Valor Esperado',
        required: true,
        placeholder: 'test',
      },
    },
  },

  // Control (contin√∫a...)
  openNewTab: {
    type: 'openNewTab',
    category: 'control',
    name: 'Abrir Pesta√±a',
    icon: '‚ûï',
    description: 'Abrir una nueva pesta√±a',
    params: {
      url: {
        type: 'text',
        label: 'URL (opcional)',
        required: false,
        placeholder: 'https://...',
      },
    },
  },

  closeTab: {
    type: 'closeTab',
    category: 'control',
    name: 'Cerrar Pesta√±a',
    icon: '‚úñÔ∏è',
    description: 'Cerrar la pesta√±a actual',
    params: {},
  },
  openWindow: {
    type: 'openWindow',
    category: 'control',
    name: 'Abrir Ventana',
    icon: 'ü™ü',
    description: 'Abrir una nueva ventana',
    params: {
      url: {
        type: 'text',
        label: 'URL',
        required: true,
        placeholder: 'https://...',
      },
    },
  },
  closeWindow: {
    type: 'closeWindow',
    category: 'control',
    name: 'Cerrar Ventana',
    icon: '‚ùå',
    description: 'Cerrar la ventana actual',
    params: {},
  },
  maximize: {
    type: 'maximize',
    category: 'control',
    name: 'Maximizar',
    icon: '‚õ∂',
    description: 'Maximizar la ventana del navegador',
    params: {},
  },
  handleAlert: {
    type: 'handleAlert',
    category: 'control',
    name: 'Manejar Alerta',
    icon: '‚ö†Ô∏è',
    description: 'Aceptar o rechazar una alerta',
    params: {
      action: {
        type: 'select',
        label: 'Acci√≥n',
        required: true,
        options: ['accept', 'dismiss'],
        default: 'accept',
      },
    },
  },
  handleConfirm: {
    type: 'handleConfirm',
    category: 'control',
    name: 'Manejar Confirm',
    icon: '‚ùì',
    description: 'Aceptar o rechazar un di√°logo de confirmaci√≥n',
    params: {
      action: {
        type: 'select',
        label: 'Acci√≥n',
        required: true,
        options: ['accept', 'dismiss'],
        default: 'accept',
      },
    },
  },
  handlePrompt: {
    type: 'handlePrompt',
    category: 'control',
    name: 'Manejar Prompt',
    icon: 'üí¨',
    description: 'Responder a un prompt',
    params: {
      text: {
        type: 'text',
        label: 'Texto',
        required: true,
        placeholder: 'Respuesta',
      },
      action: {
        type: 'select',
        label: 'Acci√≥n',
        required: true,
        options: ['accept', 'dismiss'],
        default: 'accept',
      },
    },
  },
  setCookie: {
    type: 'setCookie',
    category: 'control',
    name: 'Establecer Cookie',
    icon: 'üç™',
    description: 'Establecer una cookie',
    params: {
      name: {
        type: 'text',
        label: 'Nombre',
        required: true,
        placeholder: 'sessionId',
      },
      value: {
        type: 'text',
        label: 'Valor',
        required: true,
        placeholder: 'abc123',
      },
    },
  },
  getCookie: {
    type: 'getCookie',
    category: 'control',
    name: 'Obtener Cookie',
    icon: 'üç™',
    description: 'Obtener el valor de una cookie',
    params: {
      name: {
        type: 'text',
        label: 'Nombre',
        required: true,
        placeholder: 'sessionId',
      },
      variable: {
        type: 'text',
        label: 'Variable',
        required: false,
        placeholder: 'cookieValue',
      },
    },
  },
  clearCookies: {
    type: 'clearCookies',
    category: 'control',
    name: 'Limpiar Cookies',
    icon: 'üßπ',
    description: 'Limpiar todas las cookies',
    params: {},
  },
  localStorage: {
    type: 'localStorage',
    category: 'control',
    name: 'Local Storage',
    icon: 'üíæ',
    description: 'Interactuar con localStorage',
    params: {
      action: {
        type: 'select',
        label: 'Acci√≥n',
        required: true,
        options: ['get', 'set', 'remove', 'clear'],
        default: 'get',
      },
      key: {
        type: 'text',
        label: 'Clave',
        required: false,
        placeholder: 'userId',
      },
      value: {
        type: 'text',
        label: 'Valor',
        required: false,
        placeholder: '12345',
      },
    },
  },

  // Esperas
  waitVisible: {
    type: 'waitVisible',
    category: 'wait',
    name: 'Esperar Visible',
    icon: '‚è≥üëÅÔ∏è',
    description: 'Esperar a que un elemento sea visible',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '.loader',
      },
      timeout: {
        type: 'number',
        label: 'Timeout (ms)',
        required: false,
        placeholder: '5000',
        default: 5000,
      },
    },
  },
  waitClickable: {
    type: 'waitClickable',
    category: 'wait',
    name: 'Esperar Clickeable',
    icon: '‚è≥üëÜ',
    description: 'Esperar a que un elemento sea clickeable',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'button#submit',
      },
      timeout: {
        type: 'number',
        label: 'Timeout (ms)',
        required: false,
        placeholder: '5000',
        default: 5000,
      },
    },
  },
  waitPresent: {
    type: 'waitPresent',
    category: 'wait',
    name: 'Esperar Presente',
    icon: '‚è≥üîç',
    description: 'Esperar a que un elemento est√© en el DOM',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '#dynamicElement',
      },
      timeout: {
        type: 'number',
        label: 'Timeout (ms)',
        required: false,
        placeholder: '5000',
        default: 5000,
      },
    },
  },
  waitDisappear: {
    type: 'waitDisappear',
    category: 'wait',
    name: 'Esperar Desaparecer',
    icon: '‚è≥üëª',
    description: 'Esperar a que un elemento desaparezca',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '.loading',
      },
      timeout: {
        type: 'number',
        label: 'Timeout (ms)',
        required: false,
        placeholder: '5000',
        default: 5000,
      },
    },
  },
  waitText: {
    type: 'waitText',
    category: 'wait',
    name: 'Esperar Texto',
    icon: '‚è≥üìù',
    description: 'Esperar a que aparezca un texto espec√≠fico',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '.status',
      },
      text: {
        type: 'text',
        label: 'Texto',
        required: true,
        placeholder: 'Completado',
      },
      timeout: {
        type: 'number',
        label: 'Timeout (ms)',
        required: false,
        placeholder: '5000',
        default: 5000,
      },
    },
  },
  waitPageLoad: {
    type: 'waitPageLoad',
    category: 'wait',
    name: 'Esperar Carga',
    icon: '‚è≥üìÑ',
    description: 'Esperar a que la p√°gina cargue completamente',
    params: {
      timeout: {
        type: 'number',
        label: 'Timeout (ms)',
        required: false,
        placeholder: '30000',
        default: 30000,
      },
    },
  },
  wait: {
    type: 'wait',
    category: 'wait',
    name: 'Espera Fija',
    icon: '‚è±Ô∏è',
    description: 'Esperar un tiempo fijo',
    params: {
      duration: {
        type: 'number',
        label: 'Duraci√≥n (ms)',
        required: true,
        placeholder: '1000',
      },
    },
  },
  waitCondition: {
    type: 'waitCondition',
    category: 'wait',
    name: 'Esperar Condici√≥n',
    icon: '‚è≥‚úÖ',
    description: 'Esperar a que se cumpla una condici√≥n personalizada',
    params: {
      condition: {
        type: 'textarea',
        label: 'Condici√≥n JS',
        required: true,
        placeholder: 'return document.readyState === "complete"',
      },
      timeout: {
        type: 'number',
        label: 'Timeout (ms)',
        required: false,
        placeholder: '5000',
        default: 5000,
      },
    },
  },

  // Avanzado
  screenshot: {
    type: 'screenshot',
    category: 'advanced',
    name: 'Screenshot',
    icon: 'üì∏',
    description: 'Tomar captura de pantalla completa',
    params: {
      filename: {
        type: 'text',
        label: 'Nombre archivo',
        required: false,
        placeholder: 'screenshot.png',
      },
    },
  },
  screenshotElement: {
    type: 'screenshotElement',
    category: 'advanced',
    name: 'Screenshot Elemento',
    icon: 'üì∑',
    description: 'Tomar captura de un elemento espec√≠fico',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '#element',
      },
      filename: {
        type: 'text',
        label: 'Nombre archivo',
        required: false,
        placeholder: 'element.png',
      },
    },
  },
  scroll: {
    type: 'scroll',
    category: 'advanced',
    name: 'Scroll',
    icon: 'üìú',
    description: 'Hacer scroll en la p√°gina',
    params: {
      x: {
        type: 'number',
        label: 'Posici√≥n X',
        required: false,
        placeholder: '0',
        default: 0,
      },
      y: {
        type: 'number',
        label: 'Posici√≥n Y',
        required: true,
        placeholder: '500',
      },
    },
  },
  scrollTo: {
    type: 'scrollTo',
    category: 'advanced',
    name: 'Scroll a Elemento',
    icon: 'üéØ',
    description: 'Hacer scroll hasta un elemento',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: '#section',
      },
    },
  },
  switchIframe: {
    type: 'switchIframe',
    category: 'advanced',
    name: 'Cambiar a Iframe',
    icon: 'üñºÔ∏è',
    description: 'Cambiar el contexto a un iframe',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'iframe#myFrame',
      },
    },
  },
  uploadFile: {
    type: 'uploadFile',
    category: 'advanced',
    name: 'Subir Archivo',
    icon: 'üì§',
    description: 'Subir un archivo',
    params: {
      selector: {
        type: 'text',
        label: 'Selector CSS',
        required: true,
        placeholder: 'input[type="file"]',
      },
      filepath: {
        type: 'text',
        label: 'Ruta del archivo',
        required: true,
        placeholder: '/path/to/file.pdf',
      },
    },
  },
  downloadFile: {
    type: 'downloadFile',
    category: 'advanced',
    name: 'Descargar Archivo',
    icon: 'üì•',
    description: 'Descargar un archivo',
    params: {
      url: {
        type: 'text',
        label: 'URL del archivo',
        required: true,
        placeholder: 'https://...',
      },
    },
  },
  executeScript: {
    type: 'executeScript',
    category: 'advanced',
    name: 'Ejecutar Script',
    icon: 'üíª',
    description: 'Ejecutar JavaScript personalizado',
    params: {
      script: {
        type: 'textarea',
        label: 'C√≥digo JavaScript',
        required: true,
        placeholder: 'console.log("Hello");',
      },
    },
  },
  log: {
    type: 'log',
    category: 'advanced',
    name: 'Log/Comentario',
    icon: 'üìã',
    description: 'Agregar un log o comentario',
    params: {
      message: {
        type: 'textarea',
        label: 'Mensaje',
        required: true,
        placeholder: 'Punto de verificaci√≥n...',
      },
    },
  },
};

// Obtener acci√≥n por tipo
function getActionByType(type) {
  return TestActions[type] || null;
}

// Obtener acciones por categor√≠a
function getActionsByCategory(category) {
  return Object.values(TestActions).filter((action) => action.category === category);
}

// Obtener todas las categor√≠as
function getAllCategories() {
  const categories = new Set();
  Object.values(TestActions).forEach((action) => {
    categories.add(action.category);
  });
  return Array.from(categories);
}

// Exportar
window.TestActions = TestActions;
window.getActionByType = getActionByType;
window.getActionsByCategory = getActionsByCategory;
window.getAllCategories = getAllCategories;
